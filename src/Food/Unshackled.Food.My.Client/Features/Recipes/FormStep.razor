@inherits FormStepBase

<EditForm Model="@Model" OnValidSubmit="HandleFormSubmitted">
	<FluentValidationValidator Validator="ModelValidator"></FluentValidationValidator>
	<MudGrid Spacing="2" Class="mb-3">
		<MudItem xs="12">
			<MudTextField Label="Instructions" Variant="Variant.Outlined" FullWidth="true" Disabled="@DisableControls" Lines="5"
					@bind-Value="@Model.Instructions" For="@(() => Model.Instructions)" />
		</MudItem>
		@if (UnusedIngredients.Any())
		{
			<MudItem xs="12">
				<MudText Typo="Typo.subtitle2">Ingredients used in this step</MudText>
				<div class="d-flex flex-row gap-2 flex-wrap">
					@foreach (var item in UnusedIngredients)
					{
						<MudCheckBox Label="@item.Title" Value="@item.Checked" Disabled="@DisableControls" ValueChanged="@((bool value) => HandleIngredientCheckChange(value, item))" />
					}
				</div>
			</MudItem>
		}
		<MudItem xs="12">
			<MudButton Variant="Variant.Filled" Color="Color.Primary" ButtonType="ButtonType.Submit" Disabled="@DisableControls">@SubmitButtonLabel</MudButton>
			<MudButton Variant="Variant.Outlined" Disabled="@DisableControls" OnClick="@(() => HandleCancelClicked())">Cancel</MudButton>
		</MudItem>
	</MudGrid>
</EditForm>